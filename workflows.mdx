---
title: 'Workflow Overview'
description: 'Detailed description of workflow objects used in the WithAI API'
---

## Introduction to Workflow Objects

Workflow objects in WithAI define the structure and execution flow of automated processes. They include various steps that can be either autonomous decisions made by AI agents or interactions with users through messaging services. The workflow execution is tracked and can be retrieved via the API to monitor the process and its outcomes.


## Workflow Object Structure

A workflow object includes several key components such as `firstStep`, `inputData`, `services`, `contacts`, and `steps`. Each component has a specific role in defining the workflow's functionality and execution flow.

```json
{
  "firstStep": "initialAssessment",
  "inputData": { "taskDetails": "Details of the task to be assessed" },
  "services": {
    "openai": { "apiKey": "your-openai-key" },
    "twilio": { "accountSID": "your-twilio-sid", "authToken": "your-twilio-token" }
  },
  "contacts": [
    {
      "id": "user123",
      "phoneNumber": "15551234567"
    }
  ],
  "steps": [
    {
      "id": "initialAssessment",
      "type": "decision",
      "description": "Assess the initial task details",
      "instructions": "Review the task details and decide whether it needs human intervention.",
      "events": [
        {
          "type": "choice",
          "description": "The task requires human intervention.",
          "nextStepID": "notifyUser"
        },
        {
          "type": "choice",
          "description": "The task can proceed automatically.",
          "nextStepID": "processTask"
        }
      ]
    },
    {
      "id": "notifyUser",
      "type": "message",
      "config": {
        "service": "twilio"
      },
      "contactID": "user123",
      "description": "Notify the user for manual intervention.",
      "message": "Please review the task details and provide your input.",
      "replies": [
        {
          "description": "User confirms to proceed",
          "nextStepID": "processTask"
        },
        {
          "description": "User requests to stop",
          "nextStepID": "terminateTask"
        }
      ],
      "fallback": {
        "waitTimeInSeconds": 600,
        "nextStepID": "terminateTask"
      }
    },
    {
      "id": "processTask",
      "type": "output",
      "description": "Process the task automatically",
      "properties": [
        {
          "id": "taskProcessed",
          "type": "boolean",
          "value": true
        },
        {
          "id": "processingDetails",
          "type": "string",
          "description": "Details of the automated task processing"
        }
      ]
    },
    {
      "id": "terminateTask",
      "type": "output",
      "description": "Terminate the task as per user's request",
      "properties": [
        {
          "id": "taskTerminated",
          "type": "boolean",
          "value": true
        },
        {
          "id": "terminationReason",
          "type": "string",
          "description": "Reason for task termination"
        }
      ]
    }
  ]
}
```

### First Step

The `firstStep` property defines the initial step in the workflow. If not specified, it defaults to the first listed step.

### Input Data

The `inputData` property holds an arbitrary data object used throughout the workflow.

### Services

The `services` property includes credentials and configurations for external services such as OpenAI and Twilio.

### Contacts

The `contacts` array defines the contacts involved in the workflow, including their IDs and phone numbers.

### Steps

The `steps` array contains the sequence of actions or decisions to be executed within the workflow.

## Types of Steps

### Decision Steps

Decision steps involve autonomous reasoning by AI agents to decide on the next step.

```json
{
  "id": "initialAssessment",
  "type": "decision",
  "description": "Assess the initial task details",
  "instructions": "Review the task details and decide whether it needs human intervention.",
  "events": [
    {
      "type": "choice",
      "description": "The task requires human intervention.",
      "nextStepID": "notifyUser"
    },
    {
      "type": "choice",
      "description": "The task can proceed automatically.",
      "nextStepID": "processTask"
    }
  ]
}
```

### Message Steps

Message steps involve sending messages to specified contacts and handling their replies to determine the next step.

```json
{
  "id": "notifyUser",
  "type": "message",
  "config": {
    "service": "twilio"
  },
  "contactID": "user123",
  "description": "Notify the user for manual intervention.",
  "message": "Please review the task details and provide your input.",
  "replies": [
    {
      "description": "User confirms to proceed",
      "nextStepID": "processTask"
    },
    {
      "description": "User requests to stop",
      "nextStepID": "terminateTask"
    }
  ],
  "fallback": {
    "waitTimeInSeconds": 600,
    "nextStepID": "terminateTask"
  }
}
```


### Output Steps

Output steps conclude the workflow by returning data that can be retrieved via the API.

```json
{
  "id": "processTask",
  "type": "output",
  "description": "Process the task automatically",
  "properties": [
    {
      "id": "taskProcessed",
      "type": "boolean",
      "value": true
    },
    {
      "id": "processingDetails",
      "type": "string",
      "description": "Details of the automated task processing"
    }
  ]
}
```


## Workflow Status Objects

The status of a workflow can be retrieved to monitor its progress. The status object includes information about executed steps, metadata, and any output returned.

### Example Status Object

```json
{
  "executionID": "xyz789",
  "stepsExecuted": [
    {
      "stepID": "initialAssessment",
      "status": "completed",
      "metadata": {
        "decision": "requires intervention"
      }
    }
  ],
  "output": {
    "taskProcessed": true,
    "processingDetails": "Task was processed automatically based on user input."
  }
}
```

<Tip>

Retrieving workflow status helps in understanding the workflow's progress and making informed decisions based on its output.

</Tip>

